services:
  app:
    build:
      context: .
      dockerfile: Dockerfile
    container_name: kfc-ai-delivery
    ports:
      - "${HOST_PORT:-3000}:3000"
    environment:
      NODE_ENV: production
      PORT: 3000
      DB_PATH: /app/data/database.sqlite
      SESSION_SECRET: ${SESSION_SECRET:-change-this-session-secret}
      GEMINI_API_KEY: ${GEMINI_API_KEY:-}
      ADMIN_CODE: ${ADMIN_CODE:-}
      ADMIN_PHONE: ${ADMIN_PHONE:-}
      GEMINI_LIVE_MODEL: ${GEMINI_LIVE_MODEL:-gemini-2.5-flash-native-audio-preview-09-2025}
      TELEGRAM_BOT_TOKEN: ${TELEGRAM_BOT_TOKEN:-}
      TELEGRAM_MINI_APP_URL: ${TELEGRAM_MINI_APP_URL:-}
      TELEGRAM_WEBHOOK_URL: ${TELEGRAM_WEBHOOK_URL:-}
      TELEGRAM_WEBHOOK_SECRET: ${TELEGRAM_WEBHOOK_SECRET:-}
      TELEGRAM_ADMIN_CHAT_ID: ${TELEGRAM_ADMIN_CHAT_ID:-}
      TELEGRAM_INIT_DATA_MAX_AGE_SECONDS: ${TELEGRAM_INIT_DATA_MAX_AGE_SECONDS:-86400}
    volumes:
      - ./data:/app/data
    restart: unless-stopped
